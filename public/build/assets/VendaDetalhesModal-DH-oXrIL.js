import{j as s}from"./set-USP3l9q2.js";import{M as u}from"./ModalPortal-BmnFxbHG.js";function g({show:d,venda:l,fechar:r,loading:n=!1,onCancelar:a,cancelando:o=!1}){var i,m;if(!d)return null;const c=e=>{if(e==null)return"—";const t=typeof e=="number"?e:parseFloat(String(e).replace(/\./g,"").replace(",","."));return Number.isFinite(t)?t.toFixed(2).replace(".",","):"—"},x=e=>e==="conta_fiada"?"pendente":e??"—",h=e=>{switch(e){case"conta_fiada":return"fiado";case"dinheiro":return"dinheiro";case"pix":return"pix";case"debito":return"débito";case"credito":return"crédito";default:return e??"—"}},j=((i=l==null?void 0:l.usuario)==null?void 0:i.NOME)||((m=l==null?void 0:l.usuario)==null?void 0:m.nome)||"—",N=l!=null&&l.cliente?l.cliente.nome??"—":"—",b=l!=null&&l.created_at?new Date(l.created_at).toLocaleString("pt-BR"):"—";return s.jsxs(u,{children:[s.jsx("div",{className:"modal-backdrop fade show",onClick:r}),s.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:-1,role:"dialog","aria-modal":"true",children:s.jsx("div",{className:"modal-dialog modal-lg modal-dialog-centered",children:s.jsxs("div",{className:"modal-content",children:[s.jsxs("div",{className:"modal-header",children:[s.jsxs("h5",{className:"modal-title",children:[s.jsx("i",{className:"bi bi-receipt-cutoff me-2"}),"Detalhes da Venda #",(l==null?void 0:l.id)??"—"]}),s.jsx("button",{type:"button",className:"btn-close",onClick:r,"aria-label":"Fechar"})]}),s.jsxs("div",{className:"modal-body",children:[n&&s.jsxs("div",{className:"d-flex align-items-center mb-3",children:[s.jsx("div",{className:"spinner-border me-2",role:"status"}),"Carregando detalhes…"]}),s.jsxs("dl",{className:"row mb-3",children:[s.jsx("dt",{className:"col-sm-3",children:"Data/Hora"}),s.jsx("dd",{className:"col-sm-9",children:b}),s.jsx("dt",{className:"col-sm-3",children:"Operador"}),s.jsx("dd",{className:"col-sm-9",children:j}),s.jsx("dt",{className:"col-sm-3",children:"Cliente"}),s.jsx("dd",{className:"col-sm-9",children:N}),s.jsx("dt",{className:"col-sm-3",children:"Status"}),s.jsx("dd",{className:"col-sm-9",children:x(l==null?void 0:l.status)}),s.jsx("dt",{className:"col-sm-3",children:"Pagamento"}),s.jsx("dd",{className:"col-sm-9",children:h(l==null?void 0:l.forma_pagamento)}),s.jsx("dt",{className:"col-sm-3",children:"Subtotal"}),s.jsxs("dd",{className:"col-sm-9",children:["R$ ",c(l==null?void 0:l.subtotal)]}),s.jsx("dt",{className:"col-sm-3",children:"Desconto"}),s.jsxs("dd",{className:"col-sm-9",children:["R$ ",c(l==null?void 0:l.desconto)]}),s.jsx("dt",{className:"col-sm-3",children:"Total"}),s.jsx("dd",{className:"col-sm-9",children:s.jsxs("strong",{children:["R$ ",c(l==null?void 0:l.total)]})}),(l==null?void 0:l.forma_pagamento)==="dinheiro"&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"col-sm-3",children:"Recebido"}),s.jsxs("dd",{className:"col-sm-9",children:["R$ ",c((l==null?void 0:l.valor_recebido)??void 0)]}),s.jsx("dt",{className:"col-sm-3",children:"Troco"}),s.jsxs("dd",{className:"col-sm-9",children:["R$ ",c((l==null?void 0:l.troco)??void 0)]})]}),s.jsx("dt",{className:"col-sm-3",children:"Observações"}),s.jsx("dd",{className:"col-sm-9",children:s.jsx("div",{className:"bg-light text-break rounded border p-2",children:(l==null?void 0:l.observacoes)||"—"})})]}),s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table-sm table align-middle",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Produto"}),s.jsx("th",{className:"text-end",children:"Qtd"}),s.jsx("th",{className:"text-end",children:"Unit."}),s.jsx("th",{className:"text-end",children:"Subtotal"})]})}),s.jsx("tbody",{children:l!=null&&l.itens&&l.itens.length>0?l.itens.map(e=>{var t;return s.jsxs("tr",{children:[s.jsx("td",{children:((t=e.produto)==null?void 0:t.nome)??"—"}),s.jsx("td",{className:"text-end",children:e.quantidade}),s.jsxs("td",{className:"text-end",children:["R$ ",c(e.preco_unitario)]}),s.jsxs("td",{className:"text-end",children:["R$ ",c(e.subtotal)]})]},e.id)}):s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"text-muted py-3 text-center",children:"Sem itens"})})})]})})]}),s.jsxs("div",{className:"modal-footer flex-column flex-md-row w-100 gap-2",children:[l&&l.status!=="cancelada"&&a&&s.jsx("button",{type:"button",className:`btn btn-finalizar-venda btn-cancelar-venda w-100 ${o?"processing":""}`,onClick:()=>a(l),disabled:o,children:o?s.jsx("span",{className:"fw-semibold",children:"Cancelando venda..."}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"bi bi-x-circle me-2"}),"Cancelar venda"]})}),s.jsx("button",{type:"button",className:"btn btn-secondary w-100",onClick:r,children:"Fechar"})]})]})})})]})}export{g as V};
